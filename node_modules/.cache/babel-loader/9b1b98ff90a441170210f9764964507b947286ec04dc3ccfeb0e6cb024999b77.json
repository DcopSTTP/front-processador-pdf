{"ast":null,"code":"import{AlertCircleIcon}from'lucide-react';import React,{useRef,useState}from'react';import{DataEditor}from'../../componentes/DataEditor';import{FilePreview}from'../../componentes/FilePreview';import{ProcessIcon}from'../../componentes/ProcessIcon';import{FileUpload}from'../../componentes/FileUpload';import{containerStyle,errorStyle,headerIconStyle,headerStyle,instructionItemStyle,instructionsStyle,mainContainerStyle,subtitleStyle,titleStyle,uploadCardStyle}from'../../styles/appStyles';import{formatFileSize}from'../../utils/fileUtils';import{createHandlers}from'../../utils/handlers';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProcessadorPDF(_ref){let{onViewDetails}=_ref;const[dragActive,setDragActive]=useState(false);const[uploadedFile,setUploadedFile]=useState(null);const[uploading,setUploading]=useState(false);const[processing,setProcessing]=useState(false);const[extractedData,setExtractedData]=useState(null);const[error,setError]=useState('');const fileInputRef=useRef(null);const{handleDrag,handleDrop,handleFileSelect,processPDF,saveToBackend,removeFile,openFileDialog}=createHandlers(setError,setExtractedData,setUploading,setUploadedFile,setProcessing,fileInputRef,setDragActive,uploadedFile,extractedData,onViewDetails);return/*#__PURE__*/_jsxs(\"div\",{style:containerStyle,children:[/*#__PURE__*/_jsxs(\"div\",{style:mainContainerStyle,children:[/*#__PURE__*/_jsxs(\"div\",{style:headerStyle,children:[/*#__PURE__*/_jsx(\"div\",{style:headerIconStyle,children:/*#__PURE__*/_jsx(ProcessIcon,{style:{color:'white'}})}),/*#__PURE__*/_jsx(\"h1\",{style:titleStyle,children:\"Processador de Ocorr\\xEAncias\"}),/*#__PURE__*/_jsx(\"p\",{style:subtitleStyle,children:\"Extraia e reorganize informa\\xE7\\xF5es de relat\\xF3rios de ocorr\\xEAncia\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:uploadCardStyle,children:[!uploadedFile?/*#__PURE__*/_jsx(FileUpload,{dragActive:dragActive,uploading:uploading,handleDrag:handleDrag,handleDrop:handleDrop,openFileDialog:openFileDialog,fileInputRef:fileInputRef,handleFileSelect:handleFileSelect}):/*#__PURE__*/_jsx(FilePreview,{uploadedFile:uploadedFile,processing:processing,formatFileSize:formatFileSize,removeFile:removeFile,openFileDialog:openFileDialog,processPDF:processPDF}),error&&/*#__PURE__*/_jsxs(\"div\",{style:errorStyle,children:[/*#__PURE__*/_jsx(AlertCircleIcon,{style:{color:'#dc2626',flexShrink:0}}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px',color:'#dc2626',margin:0},children:error})]})]}),extractedData&&/*#__PURE__*/_jsx(DataEditor,{extractedData:extractedData,saveToBackend:saveToBackend,onCancel:()=>setExtractedData(null)}),/*#__PURE__*/_jsxs(\"div\",{style:instructionsStyle,children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontWeight:'600',color:'#1f2937',marginBottom:'12px'},children:\"Como usar:\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{listStyle:'none',padding:0,margin:0},children:[/*#__PURE__*/_jsxs(\"li\",{style:instructionItemStyle,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#2563eb',fontWeight:'500'},children:\"1.\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Fa\\xE7a upload do PDF da ocorr\\xEAncia\"})]}),/*#__PURE__*/_jsxs(\"li\",{style:instructionItemStyle,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#2563eb',fontWeight:'500'},children:\"2.\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Clique em \\\"Processar PDF\\\" para extrair as informa\\xE7\\xF5es\"})]}),/*#__PURE__*/_jsxs(\"li\",{style:instructionItemStyle,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#2563eb',fontWeight:'500'},children:\"3.\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Revise e edite os dados extra\\xEDdos se necess\\xE1rio\"})]}),/*#__PURE__*/_jsxs(\"li\",{style:instructionItemStyle,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#2563eb',fontWeight:'500'},children:\"4.\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Clique em \\\"Salvar Dados no Sistema\\\" ap\\xF3s revisar\"})]}),/*#__PURE__*/_jsxs(\"li\",{style:instructionItemStyle,children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#2563eb',fontWeight:'500'},children:\"5.\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Os dados extra\\xEDdos incluem: Natureza \\u2192 Narrativas \\u2192 Localiza\\xE7\\xE3o \\u2192 Empenhos \\u2192 Relatos\"})]})]})]})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes pulse {\\n          0%, 100% { opacity: 1; }\\n          50% { opacity: .5; }\\n        }\\n        \\n        button:disabled {\\n          opacity: 0.6;\\n          cursor: not-allowed;\\n        }\\n        \\n        button:hover:not(:disabled) {\\n          transform: translateY(-1px);\\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\\n        }\\n      \"})]});}export default ProcessadorPDF;","map":{"version":3,"names":["AlertCircleIcon","React","useRef","useState","DataEditor","FilePreview","ProcessIcon","FileUpload","containerStyle","errorStyle","headerIconStyle","headerStyle","instructionItemStyle","instructionsStyle","mainContainerStyle","subtitleStyle","titleStyle","uploadCardStyle","formatFileSize","createHandlers","jsx","_jsx","jsxs","_jsxs","ProcessadorPDF","_ref","onViewDetails","dragActive","setDragActive","uploadedFile","setUploadedFile","uploading","setUploading","processing","setProcessing","extractedData","setExtractedData","error","setError","fileInputRef","handleDrag","handleDrop","handleFileSelect","processPDF","saveToBackend","removeFile","openFileDialog","style","children","color","flexShrink","fontSize","margin","onCancel","fontWeight","marginBottom","listStyle","padding"],"sources":["/Users/lohuamalima/Desktop/sttp/ocorrencias-de-transito/src/screens/ProcessadorPDF/index.jsx"],"sourcesContent":["import { AlertCircleIcon } from 'lucide-react';\nimport React, { useRef, useState } from 'react';\nimport { DataEditor } from '../../componentes/DataEditor';\nimport { FilePreview } from '../../componentes/FilePreview';\nimport { ProcessIcon } from '../../componentes/ProcessIcon';\nimport { FileUpload } from '../../componentes/FileUpload';\nimport {\n  containerStyle,\n  errorStyle,\n  headerIconStyle,\n  headerStyle,\n  instructionItemStyle,\n  instructionsStyle,\n  mainContainerStyle,\n  subtitleStyle,\n  titleStyle,\n  uploadCardStyle\n} from '../../styles/appStyles';\nimport { formatFileSize } from '../../utils/fileUtils';\nimport { createHandlers } from '../../utils/handlers';\n\nfunction ProcessadorPDF({ onViewDetails }) {\n  const [dragActive, setDragActive] = useState(false);\n  const [uploadedFile, setUploadedFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [processing, setProcessing] = useState(false);\n  const [extractedData, setExtractedData] = useState(null);\n  const [error, setError] = useState('');\n  const fileInputRef = useRef(null);\n\n  const {\n    handleDrag,\n    handleDrop,\n    handleFileSelect,\n    processPDF,\n    saveToBackend,\n    removeFile,\n    openFileDialog\n  } = createHandlers(\n    setError,\n    setExtractedData,\n    setUploading,\n    setUploadedFile,\n    setProcessing,\n    fileInputRef,\n    setDragActive,\n    uploadedFile,\n    extractedData,\n    onViewDetails\n  );\n\n  return (\n    <div style={containerStyle}>\n      <div style={mainContainerStyle}>\n        \n        <div style={headerStyle}>\n          <div style={headerIconStyle}>\n            <ProcessIcon style={{ color: 'white' }} />\n          </div>\n          <h1 style={titleStyle}>Processador de Ocorrências</h1>\n          <p style={subtitleStyle}>Extraia e reorganize informações de relatórios de ocorrência</p>\n        </div>\n\n        <div style={uploadCardStyle}>\n          {!uploadedFile ? (\n            <FileUpload\n              dragActive={dragActive}\n              uploading={uploading}\n              handleDrag={handleDrag}\n              handleDrop={handleDrop}\n              openFileDialog={openFileDialog}\n              fileInputRef={fileInputRef}\n              handleFileSelect={handleFileSelect}\n            />\n          ) : (\n            <FilePreview\n              uploadedFile={uploadedFile}\n              processing={processing}\n              formatFileSize={formatFileSize}\n              removeFile={removeFile}\n              openFileDialog={openFileDialog}\n              processPDF={processPDF}\n            />\n          )}\n\n          {error && (\n            <div style={errorStyle}>\n              <AlertCircleIcon style={{ color: '#dc2626', flexShrink: 0 }} />\n              <p style={{ fontSize: '14px', color: '#dc2626', margin: 0 }}>{error}</p>\n            </div>\n          )}\n        </div>\n\n        {extractedData && (\n          <DataEditor \n            extractedData={extractedData} \n            saveToBackend={saveToBackend}\n            onCancel={() => setExtractedData(null)} \n          />\n        )}\n\n        <div style={instructionsStyle}>\n          <h3 style={{ fontWeight: '600', color: '#1f2937', marginBottom: '12px' }}>Como usar:</h3>\n          <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\n            <li style={instructionItemStyle}>\n              <span style={{ color: '#2563eb', fontWeight: '500' }}>1.</span>\n              <span>Faça upload do PDF da ocorrência</span>\n            </li>\n            <li style={instructionItemStyle}>\n              <span style={{ color: '#2563eb', fontWeight: '500' }}>2.</span>\n              <span>Clique em \"Processar PDF\" para extrair as informações</span>\n            </li>\n            <li style={instructionItemStyle}>\n              <span style={{ color: '#2563eb', fontWeight: '500' }}>3.</span>\n              <span>Revise e edite os dados extraídos se necessário</span>\n            </li>\n            <li style={instructionItemStyle}>\n              <span style={{ color: '#2563eb', fontWeight: '500' }}>4.</span>\n              <span>Clique em \"Salvar Dados no Sistema\" após revisar</span>\n            </li>\n            <li style={instructionItemStyle}>\n              <span style={{ color: '#2563eb', fontWeight: '500' }}>5.</span>\n              <span>Os dados extraídos incluem: Natureza → Narrativas → Localização → Empenhos → Relatos</span>\n            </li>\n          </ul>\n        </div>\n      </div>\n      \n      <style>{`\n        @keyframes pulse {\n          0%, 100% { opacity: 1; }\n          50% { opacity: .5; }\n        }\n        \n        button:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n        \n        button:hover:not(:disabled) {\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default ProcessadorPDF;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}